<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>広告クリック → 10秒待機 → リンク表示</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #f0f0f0;
      margin: 0;
      padding: 20px;
    }
    h1 {
      margin-bottom: 20px;
    }
    #adContainer {
      display: inline-block;
      border: 2px solid #ccc;
      background-color: #fff;
      padding: 10px;
      cursor: pointer; /* 広告周りのクリックをしやすくする */
    }
    #linkContainer {
      margin-top: 30px;
      display: none;
    }
    #linkContainer a {
      display: inline-block;
      padding: 10px 20px;
      background-color: #007BFF;
      color: #fff;
      text-decoration: none;
      border-radius: 4px;
    }
    #linkContainer a:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
  <h1>広告クリック → 10秒待機 → リンク表示</h1>
  <p>以下の広告をクリックして、10秒以上経過してから戻ってくるとリンクが表示されます。</p>

  <!-- 広告エリア -->
  <div id="adContainer">
    <!-- admax -->
    <script src="https://adm.shinobi.jp/s/1c98a05e5112d632eea60695e4420462"></script>
    <!-- /admax -->
  </div>

  <!-- リンクを表示する領域 -->
  <div id="linkContainer"></div>

  <script>
    // 必要な視聴時間(ミリ秒)を10秒に設定
    const REQUIRED_TIME_MS = 10 * 1000; // 10秒

    // 表示したいURLをBase64エンコードした文字列
    // 例: btoa("https://gofile.io/d/rYLkNb") の結果
    const encodedLink = "aHR0cHM6Ly9nb2ZpbGUuaW8vZC9yWUxrTmI=";

    // 広告をクリックした時刻を記録
    document.getElementById('adContainer').addEventListener('click', function() {
      localStorage.setItem('adClickTime', Date.now());
      alert("広告をクリックしました。\nこのまま広告ページを10秒間ほど閲覧してから戻ってきてください。");
    });

    // ページ読み込み完了時に、広告クリックからの経過時間をチェック
    window.addEventListener('DOMContentLoaded', function() {
      const lastClickTime = localStorage.getItem('adClickTime');
      if (!lastClickTime) {
        // まだ広告がクリックされていない場合は何もしない
        return;
      }

      // 現在時刻との時間差を計算
      const now = Date.now();
      const diff = now - parseInt(lastClickTime, 10);

      if (diff >= REQUIRED_TIME_MS) {
        // 10秒以上経過していればリンクを表示
        showLink();
      } else {
        alert("まだ10秒経過していません。広告ページをもう少し見てから戻ってきてください。");
      }
    });

    // リンクを表示する処理
    function showLink() {
      const linkContainer = document.getElementById('linkContainer');

      // すでにリンクが表示されている場合は何もしない
      if (linkContainer.children.length > 0) return;

      // Base64デコードしてURLを取得
      const decodedLink = atob(encodedLink);

      // <a>要素を生成
      const anchor = document.createElement('a');
      anchor.href = decodedLink;
      anchor.target = "_blank";
      anchor.textContent = "目的のサイトへ移動する";

      // コンテナに追加して表示
      linkContainer.appendChild(anchor);
      linkContainer.style.display = "block";
    }
  </script>
</body>
</html>
